<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Airconekta ¬∑ Centro de Solicitudes</title>

  <meta name="theme-color" content="#0b1220" />
  <meta name="color-scheme" content="light dark" />
  <meta name="description" content="Centro de solicitudes Airconekta: Instalaci√≥n, Cambio de domicilio y Cancelaci√≥n. Env√≠o por WhatsApp con formato listo." />

  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/airconekta/airconekta/refs/heads/main/airconekta_logo_512.png" />
  <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/airconekta/airconekta/refs/heads/main/airconekta_logo_512.png" />

  <meta property="og:title" content="Airconekta ¬∑ Centro de Solicitudes" />
  <meta property="og:description" content="Instalaci√≥n, Cambio de domicilio y Cancelaci√≥n. Env√≠o por WhatsApp con formato listo." />
  <meta property="og:image" content="https://raw.githubusercontent.com/airconekta/airconekta/refs/heads/main/airconekta_logo_1024.png" />
  <meta name="twitter:card" content="summary_large_image" />

  <!--
    ===========================================================
    Firma / Autor (solo visible al depurar o ver c√≥digo fuente)
    Jair Elizondo
    +52 322 243 9782
    Hint: /#whoami
    ===========================================================
  -->

  <style>
    :root{
      --bg:#f7f9ff;
      --card:rgba(255,255,255,.84);
      --card-solid:#ffffff;

      /* Texto con m√°s contraste en claro */
      --ink:#0b1426;
      --muted:#475a7a;

      /* Acentos (mismo estilo, un poco m√°s ‚Äúprofundos‚Äù para que no quemen) */
      --accent:#1f5cff;
      --accent-2:#14bdf2;
      --accent-3:#6d28d9;

      --border:rgba(198,216,255,.92);
      --border-2:rgba(255,255,255,.65);

      --ok:#16a34a;
      --warn:#b45309;

      --radius:18px;
      --radius-2:22px;

      --shadow:0 14px 40px rgba(16,48,96,.12);
      --shadow-2:0 18px 60px rgba(16,48,96,.16);

      /* Ring m√°s visible en claro */
      --ring:0 0 0 4px rgba(31,92,255,.18);

      --maxw:1040px;
      --logo-1024:url("https://raw.githubusercontent.com/airconekta/airconekta/refs/heads/main/airconekta_logo_1024.png");
      --logo-512:url("https://raw.githubusercontent.com/airconekta/airconekta/refs/heads/main/airconekta_logo_512.png");
      --logo-trans:url("https://raw.githubusercontent.com/airconekta/airconekta/refs/heads/main/airconekta_logo_transparent.png");
    }
    :root[data-theme="dark"]{
      --bg:#060812;
      --card:rgba(10,14,28,.78);
      --card-solid:#0b1220;

      /* Texto m√°s legible en oscuro */
      --ink:#f1f6ff;
      --muted:#b7c5e6;

      /* Acentos un poco m√°s ‚Äúne√≥n controlado‚Äù en dark */
      --accent:#3b73ff;
      --accent-2:#22d3ff;
      --accent-3:#8b5cf6;

      --border:rgba(88,118,188,.38);
      --border-2:rgba(255,255,255,.10);

      --shadow:0 18px 60px rgba(0,0,0,.50);
      --shadow-2:0 28px 90px rgba(0,0,0,.60);

      --ring:0 0 0 4px rgba(34,211,255,.20);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      color:var(--ink);
      background:
        radial-gradient(900px 500px at 10% -10%,rgba(36,107,255,.18),transparent 60%),
        radial-gradient(900px 500px at 110% 10%,rgba(24,198,255,.14),transparent 55%),
        radial-gradient(900px 500px at 50% 115%,rgba(124,58,237,.12),transparent 60%),
        var(--bg);
      overflow-x:hidden;
    }
    body::before{
      content:"";
      position:fixed;
      inset:0;
      background-image:
        linear-gradient(to right,rgba(255,255,255,.06) 1px,transparent 1px),
        linear-gradient(to bottom,rgba(255,255,255,.06) 1px,transparent 1px);
      background-size:38px 38px;
      opacity:.25;
      pointer-events:none;
      mix-blend-mode:overlay;
    }
    :root[data-theme="dark"] body::before{opacity:.1}

    a{color:inherit}

    .shell{
      max-width:var(--maxw);
      margin:0 auto;
      padding:24px;
      position:relative;
    }

    /* Splash */
    .splash{
      position:fixed;
      inset:0;
      display:grid;
      place-items:center;
      background:
        radial-gradient(900px 520px at 20% 15%,rgba(36,107,255,.28),transparent 60%),
        radial-gradient(900px 520px at 85% 25%,rgba(24,198,255,.22),transparent 55%),
        radial-gradient(900px 520px at 45% 100%,rgba(124,58,237,.18),transparent 60%),
        linear-gradient(180deg,#070b14,#0b1220);
      z-index:9999;
      transition:opacity .35s ease,transform .35s ease,visibility .35s ease;
    }
    .splash.hide{
      opacity:0;
      transform:translateY(-6px);
      visibility:hidden;
      pointer-events:none;
    }
    .splash-card{
      width:min(92vw,560px);
      border-radius:28px;
      padding:28px 22px;
      text-align:center;
      color:#eaf2ff;
      border:1px solid rgba(255,255,255,.1);
      background:rgba(10,16,30,.55);
      box-shadow:0 30px 90px rgba(0,0,0,.6);
      backdrop-filter:blur(14px) saturate(120%);
    }
    .splash-logo{
      width:88px;height:88px;margin:0 auto 10px;
      border-radius:26px;
      display:grid;place-items:center;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      position:relative;overflow:hidden;
    }
    .splash-logo::before{
      content:"";
      position:absolute;inset:-40%;
      background:conic-gradient(from 0deg,
        rgba(36,107,255,0),
        rgba(36,107,255,.6),
        rgba(24,198,255,.55),
        rgba(124,58,237,.55),
        rgba(36,107,255,0)
      );
      animation:spin 2.4s linear infinite;
      opacity:.9;
    }
    .splash-logo .logo-img{
      position:relative;
      width:62px;height:62px;border-radius:22px;
      display:block;
      background:rgba(11,18,32,.92);
      border:1px solid rgba(255,255,255,.12);
      object-fit:contain;
      padding:10px;
    }
    .splash-title{
      font-weight:1000;
      letter-spacing:.6px;
      font-size:clamp(2rem, 4.2vw, 3rem);
      margin:8px 0 6px;
    }
    .splash-sub{margin:0;color:rgba(233,238,252,.78);font-weight:700}
    .splash-bar{
      height:10px;margin:16px auto 0;border-radius:999px;
      width:min(380px,82%);
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.1);
      overflow:hidden;
    }
    .splash-bar>i{
      display:block;height:100%;width:40%;
      background:linear-gradient(90deg,rgba(36,107,255,.15),rgba(36,107,255,.85),rgba(24,198,255,.85));
      border-radius:999px;
      animation:load 1.1s ease-in-out infinite;
      filter:drop-shadow(0 6px 14px rgba(36,107,255,.2));
    }
    @keyframes load{
      0%{transform:translateX(-30%);opacity:.65}
      50%{transform:translateX(120%);opacity:1}
      100%{transform:translateX(260%);opacity:.65}
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    @media (prefers-reduced-motion:reduce){
      .splash-bar>i,.splash-logo::before{animation:none!important}
      .splash{transition:none}
    }
    .sr-only{
      position:absolute;width:1px;height:1px;padding:0;margin:-1px;
      overflow:hidden;clip:rect(0,0,0,0);border:0;
    }

    /* Navbar */
    .nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:14px 16px;
      border-radius:22px;
      border:1px solid var(--border);
      background:var(--card);
      box-shadow:var(--shadow);
      position:sticky;
      top:12px;
      backdrop-filter:blur(14px) saturate(140%);
      z-index:10;
    }
    .brand{display:flex;gap:12px;align-items:center;font-weight:1000;letter-spacing:.2px}
    .logo{
      width:40px;height:40px;border-radius:14px;
      display:grid;place-items:center;
      background:linear-gradient(135deg,rgba(36,107,255,.18),rgba(24,198,255,.14));
      border:1px solid var(--border-2);
      box-shadow:0 10px 26px rgba(16,48,96,.1);
      position:relative;overflow:hidden;
    }
    .logo::before{
      content:"";
      position:absolute;inset:-40%;
      background:conic-gradient(from 0deg,
        rgba(36,107,255,0),
        rgba(36,107,255,.55),
        rgba(24,198,255,.55),
        rgba(124,58,237,.55),
        rgba(36,107,255,0)
      );
      opacity:.55;
      animation:spin 6.5s linear infinite;
    }
    .logo .logo-img{
      position:relative;width:26px;height:26px;display:block;
      object-fit:contain;
      filter:drop-shadow(0 6px 10px rgba(0,0,0,.18));
    }
    .brand small{
      display:block;
      font-weight:800;
      color:var(--muted);
      letter-spacing:0;
      margin-top:2px;
    }
    .inline{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:flex-end}

    /* Cards & UI */
    .card{
      margin-top:18px;
      padding:22px;
      border-radius:26px;
      border:1px solid var(--border);
      background:var(--card);
      box-shadow:var(--shadow);
      backdrop-filter:blur(14px) saturate(140%);
    }
    h1{font-size:1.6rem;margin:0 0 6px;letter-spacing:.2px}
    h2{font-size:1.15rem;margin:0 0 10px}
    .lead{color:var(--muted);margin:0 0 14px}

    .btn{
      appearance:none;
      cursor:pointer;
      user-select:none;
      border:1px solid rgba(36,107,255,.65);
      color:var(--ink);
      background:rgba(255,255,255,.55);
      padding:12px 14px;
      border-radius:14px;
      font-weight:900;
      letter-spacing:.2px;
      transition:transform .08s ease,box-shadow .15s ease,background .15s ease,border-color .15s ease;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
      line-height:1;
      backdrop-filter:blur(12px) saturate(120%);
    }
    :root[data-theme="dark"] .btn{background:rgba(255,255,255,.06)}
    .btn:hover{box-shadow:var(--ring);border-color:rgba(36,107,255,.95)}
    .btn:active{transform:translateY(1px)}
    .btn:focus-visible{outline:0;box-shadow:var(--ring)}
    .btn-primary{
      color:#fff;
      border-color:transparent;
      background:linear-gradient(135deg,var(--accent),var(--accent-2));
      box-shadow:0 12px 26px rgba(36,107,255,.22);
    }
    .btn-primary:hover{box-shadow:0 0 0 4px rgba(24,198,255,.18),0 18px 46px rgba(36,107,255,.2)}
    .btn-ghost{border-color:var(--border);color:var(--ink);background:transparent}
    .btn-ghost:hover{box-shadow:0 0 0 4px rgba(207,224,255,.35)}
    .btn-icon{width:44px;height:44px;padding:0;border-radius:14px;justify-content:center}

    .status{font-size:.92rem;color:var(--muted)}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      font-size:.9rem;padding:8px 10px;border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.45);
      color:var(--muted);
      backdrop-filter:blur(12px) saturate(120%);
    }
    :root[data-theme="dark"] .pill{background:rgba(255,255,255,.05)}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:14px}
    .col-12{grid-column:span 12}
    .col-6{grid-column:span 6}
    .col-4{grid-column:span 4}
    @media (max-width:860px){
      .col-4,.col-6{grid-column:span 12}
      .shell{padding:16px}
      .nav{top:10px}
    }

    label{display:block;font-size:.92rem;color:var(--muted);margin:4px 0 6px}
    input,select,textarea{
      width:100%;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.55);
      color:var(--ink);
      outline:0;
      transition:border .15s ease,box-shadow .15s ease,transform .06s ease,background .15s ease;
      font:inherit;
      resize:vertical;
      backdrop-filter:blur(12px) saturate(120%);
    }
    :root[data-theme="dark"] input,
    :root[data-theme="dark"] select,
    :root[data-theme="dark"] textarea{
      background:rgba(255,255,255,.05);
      color:var(--ink);
    }
    input:focus,select:focus,textarea:focus{border-color:rgba(24,198,255,.75);box-shadow:var(--ring)}
    input:active,select:active,textarea:active{transform:translateY(.5px)}
    ::placeholder{color:var(--muted);opacity:.9}

    select:disabled{
      opacity:.7;
      cursor:not-allowed;
    }

    .divider{height:1px;background:rgba(207,224,255,.55);margin:14px 0}
    :root[data-theme="dark"] .divider{background:rgba(60,86,140,.35)}

    .option-cards{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:14px}
    @media (max-width:860px){.option-cards{grid-template-columns:1fr}}
    .opt{
      border:1px solid var(--border);
      border-radius:20px;
      padding:16px;
      background:rgba(255,255,255,.55);
      box-shadow:0 12px 30px rgba(16,48,96,.08);
      cursor:pointer;
      text-align:left;
      transition:transform .1s ease,box-shadow .15s ease,border-color .15s ease;
      backdrop-filter:blur(14px) saturate(140%);
    }
    :root[data-theme="dark"] .opt{background:rgba(255,255,255,.04)}
    .opt:hover{box-shadow:var(--shadow);border-color:rgba(24,198,255,.55);transform:translateY(-1px)}
    .opt:active{transform:translateY(0)}
    .opt:focus-visible{outline:0;box-shadow:var(--ring)}
    .opt .title{font-weight:1000;font-size:1.08rem;margin:0}
    .opt .desc{margin:8px 0 0;color:var(--muted);font-size:.96rem}

    .info{
      margin-top:14px;
      border:1px solid var(--border);
      border-radius:20px;
      padding:14px;
      background:rgba(255,255,255,.52);
      backdrop-filter:blur(14px) saturate(140%);
    }
    :root[data-theme="dark"] .info{background:rgba(255,255,255,.04)}
    .info .headline{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:8px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(22,163,74,.25);
      background:rgba(22,163,74,.1);
      color:#0f5132;
      font-weight:1000;
      font-size:.92rem;
    }
    :root[data-theme="dark"] .badge{
      color:rgba(200,255,220,.95);
      background:rgba(22,163,74,.12);
      border-color:rgba(22,163,74,.25);
    }

    .kpoints{display:grid;grid-template-columns:repeat(12,1fr);gap:10px;margin-top:10px}
    .k{
      grid-column:span 6;
      border:1px solid rgba(207,224,255,.55);
      border-radius:18px;
      padding:12px;
      background:rgba(255,255,255,.45);
      backdrop-filter:blur(14px) saturate(140%);
    }
    :root[data-theme="dark"] .k{border-color:rgba(60,86,140,.35);background:rgba(255,255,255,.04)}
    .k strong{display:block;margin-bottom:4px;font-weight:1000}
    @media (max-width:860px){.k{grid-column:span 12}}

    .plans{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:8px}
    @media (max-width:860px){.plans{grid-template-columns:1fr}}
    .plan{
      border:1px solid rgba(207,224,255,.55);
      border-radius:18px;
      padding:12px;
      background:rgba(255,255,255,.45);
      backdrop-filter:blur(14px) saturate(140%);
    }
    :root[data-theme="dark"] .plan{border-color:rgba(60,86,140,.35);background:rgba(255,255,255,.04)}
    .plan .pname{font-weight:1000;margin:0}
    .plan .pdesc{margin:6px 0 0;color:var(--muted)}
    .plan .price{
      margin-top:8px;
      font-weight:1000;
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      font-size:1.2rem;
    }

    .toast{
      position:fixed;
      left:50%;
      bottom:24px;
      transform:translateX(-50%) translateY(16px);
      opacity:0;
      pointer-events:none;
      background:rgba(255,255,255,.65);
      color:var(--ink);
      padding:10px 14px;
      border-radius:14px;
      border:1px solid rgba(24,198,255,.55);
      box-shadow:var(--shadow);
      transition:.18s ease;
      z-index:999;
      max-width:min(92vw,560px);
      text-align:center;
      font-weight:900;
      backdrop-filter:blur(14px) saturate(140%);
    }
    :root[data-theme="dark"] .toast{background:rgba(255,255,255,.06)}
    .toast.show{transform:translateX(-50%) translateY(0);opacity:1}

    .footer{
      margin:16px 0 0;
      color:var(--muted);
      font-size:.9rem;
      display:flex;
      justify-content:space-between;
      align-items:center;
      flex-wrap:wrap;
      gap:10px;
    }

    [data-view]{display:none}
    [data-view].active{display:block}

    .top-actions{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between}
    .mini-note{
      border:1px dashed rgba(207,224,255,.75);
      background:rgba(247,251,255,.55);
      border-radius:18px;
      padding:12px;
      color:var(--muted);
      font-size:.95rem;
      backdrop-filter:blur(14px) saturate(140%);
    }
    :root[data-theme="dark"] .mini-note{background:rgba(255,255,255,.04);border-color:rgba(60,86,140,.35)}

    /* WHOAMI */
    .who-wrap{display:grid;grid-template-columns:1.2fr .8fr;gap:14px;margin-top:12px;align-items:stretch}
    @media (max-width:860px){.who-wrap{grid-template-columns:1fr}}
    .who-card{
      border:1px solid var(--border);
      border-radius:22px;
      padding:16px;
      background:rgba(255,255,255,.5);
      backdrop-filter:blur(14px) saturate(140%);
      box-shadow:0 12px 30px rgba(16,48,96,.08);
    }
    :root[data-theme="dark"] .who-card{background:rgba(255,255,255,.04)}
    .who-hero{display:flex;gap:14px;align-items:center;flex-wrap:wrap}
    .who-avatar{
      width:72px;height:72px;border-radius:22px;
      border:1px solid var(--border);
      background:
        radial-gradient(60px 60px at 30% 20%,rgba(36,107,255,.35),transparent 60%),
        radial-gradient(60px 60px at 90% 30%,rgba(24,198,255,.28),transparent 55%),
        radial-gradient(60px 60px at 40% 95%,rgba(124,58,237,.22),transparent 60%),
        rgba(255,255,255,.45);
      display:grid;place-items:center;
      font-weight:1000;letter-spacing:.6px;
      box-shadow:0 18px 50px rgba(16,48,96,.12);
    }
    :root[data-theme="dark"] .who-avatar{background:rgba(255,255,255,.04)}
    .who-name{font-size:1.25rem;margin:0;font-weight:1000}
    .who-role{margin:2px 0 0;color:var(--muted);font-weight:800}
    .who-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  </style>
</head>

<body>
  <!-- Splash -->
  <div class="splash" id="splash" aria-label="Cargando Airconekta">
    <div class="splash-card" role="status" aria-live="polite">
      <div class="splash-logo" aria-hidden="true">
        <img class="logo-img" alt="" src="https://raw.githubusercontent.com/airconekta/airconekta/refs/heads/main/airconekta_logo_transparent.png" />
      </div>
      <div class="splash-title">AIRCONEKTA</div>
      <p class="splash-sub">Centro de solicitudes ¬∑ Atenci√≥n local</p>
      <div class="splash-bar" aria-hidden="true"><i></i></div>
      <p class="sr-only">Cargando‚Ä¶</p>
    </div>
  </div>

  <div class="shell">
    <nav class="nav" aria-label="Barra superior">
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <img class="logo-img" alt="" src="https://raw.githubusercontent.com/airconekta/airconekta/refs/heads/main/airconekta_logo_transparent.png" />
        </div>
        <div>Airconekta <small>Centro de solicitudes</small></div>
      </div>

      <div class="inline">
        <button class="btn btn-ghost" id="menuBtn" type="button">‚ò∞ Ver opciones</button>
        <button class="btn btn-icon" id="themeBtn" type="button" title="Cambiar tema" aria-label="Cambiar tema">üåì</button>
        <button id="installBtn" class="btn" style="display:none" type="button">‚ûï Instalar app</button>
        <a class="btn" href="#" id="shareBtn" title="Compartir">‚á™ Compartir</a>
      </div>
    </nav>

    <!-- HOME -->
    <section class="card active" data-view="home" id="viewHome">
      <div class="top-actions">
        <div>
          <h1>Bienvenidos a Airconekta</h1>
          <p class="lead" style="margin-bottom:0">¬øQu√© desea?</p>
        </div>
        <span class="pill">üìç Empresa local ¬∑ Atenci√≥n directa</span>
      </div>

      <div class="option-cards" aria-label="Opciones principales">
        <button class="opt" type="button" data-go="instalacion" aria-label="Presiona aqu√≠ para instalar">
          <p class="title">üõ†Ô∏è Presiona aqu√≠ para instalar</p>
          <p class="desc">Contrata tu servicio. Llena tus datos y env√≠alos por WhatsApp (listo para copiar/pegar).</p>
        </button>

        <button class="opt" type="button" data-go="cambio" aria-label="Presiona aqu√≠ para cambio de domicilio">
          <p class="title">üè† Presiona aqu√≠ para cambio de domicilio</p>
          <p class="desc">Mueve tu servicio a otra direcci√≥n indicando fecha y hora en la que te podemos recibir.</p>
        </button>

        <button class="opt" type="button" data-go="cancelacion" aria-label="Presiona aqu√≠ para cancelaciones">
          <p class="title">üßæ Presiona aqu√≠ para cancelaciones</p>
          <p class="desc">Solicita la baja y agenda la visita de retiro con fecha y hora.</p>
        </button>
      </div>

      <div class="info" aria-label="Puntos clave Airconekta">
        <div class="headline">
          <div class="badge">üí∞ $100 de saldo a favor</div>
          <div class="status">Por cada amigo que recomiendes y contrate üöÄ</div>
        </div>

        <div class="mini-note">
          üåê <strong>AIRCONEKTA</strong> ‚Äì Internet local para tu hogar.<br>
          üìç <strong>Empresa 100% local</strong>, atenci√≥n directa, <strong>sin letras chiquitas</strong> ni sorpresas.
        </div>

        <div class="divider"></div>

        <h2 style="margin:0 0 8px">üì∂ Planes inal√°mbricos (claros y sin aumentos)</h2>
        <div class="plans">
          <div class="plan">
            <p class="pname">Hasta 15 Mb</p>
            <p class="pdesc">Ideal para hogar y uso diario.</p>
            <div class="price">$300 MXN</div>
          </div>
          <div class="plan">
            <p class="pname">Hasta 20 Mb</p>
            <p class="pdesc">M√°s velocidad para varios equipos.</p>
            <div class="price">$400 MXN</div>
          </div>
          <div class="plan">
            <p class="pname">Hasta 25 Mb</p>
            <p class="pdesc">Para quienes quieren extra rendimiento.</p>
            <div class="price">$600 MXN</div>
          </div>
        </div>

        <div class="divider"></div>

        <h2 style="margin:0 0 8px">üéÅ Beneficios reales</h2>
        <div class="kpoints">
          <div class="k"><strong>‚úÖ Primer mes GRATIS</strong><span class="status">Empieza a usar el servicio desde el primer d√≠a.</span></div>
          <div class="k"><strong>‚úÖ SIN contratos forzosos</strong><span class="status">Te quedas porque te gusta el servicio.</span></div>
          <div class="k"><strong>‚úÖ SIN aumentos inesperados</strong><span class="status">Pagas siempre lo mismo, sin sorpresas.</span></div>
          <div class="k"><strong>‚úÖ Internet ILIMITADO</strong><span class="status">Disfruta sin preocuparte por ‚Äútopes‚Äù.</span></div>
          <div class="k"><strong>‚úÖ Soporte t√©cnico local</strong><span class="status">R√°pido, confiable y de frente.</span></div>
          <div class="k"><strong>üíµ Costo √∫nico de instalaci√≥n: $999 MXN</strong><span class="status">Pago una sola vez.</span></div>
        </div>

        <div class="divider"></div>

        <div class="mini-note">
          üöÄ <strong>Fibra √≥ptica</strong> disponible en zonas especiales.<br>
          üìç Especial: <strong>San Vicente del Mar</strong> ¬∑ <strong>Villas Miramar</strong>
        </div>
      </div>

      <div class="footer">
        <span>¬© <span id="year"></span> Airconekta</span>
        <span style="opacity:.85">Hecho con ‚ö° para clientes felices</span>
      </div>
    </section>

    <!-- INSTALACION -->
    <section class="card" data-view="instalacion" id="viewInstalacion">
      <div class="top-actions">
        <div>
          <h1>Solicitar instalaci√≥n</h1>
          <p class="lead">
            Selecciona tu colonia (requerida). Autom√°ticamente se mostrar√°n los planes correctos (WiFi o Fibra).
          </p>
        </div>
        <button class="btn btn-ghost" type="button" data-back>‚Üê Volver</button>
      </div>

      <div class="info" id="tipoServicioBox" aria-label="Tipo de servicio" style="display:none">
        <div class="headline">
          <div class="badge" id="tipoBadge">üì∂ WiFi</div>
          <div class="status" id="tipoStatus">Mostrando planes inal√°mbricos</div>
        </div>

        <div class="kpoints" id="wifiBox">
          <div class="k"><strong>üì∂ Planes WiFi</strong><span class="status">15 Mb $300 ¬∑ 20 Mb $400 ¬∑ 25 Mb $600</span></div>
          <div class="k"><strong>üîß Instalaci√≥n WiFi</strong><span class="status">$999 MXN (pago √∫nico)</span></div>
        </div>

        <div class="kpoints" id="fibraBox" style="display:none">
          <div class="k"><strong>üöÄ Planes Fibra</strong><span class="status">50 Mb $350 ¬∑ 70 Mb $450</span></div>
          <div class="k"><strong>üîß Instalaci√≥n Fibra</strong><span class="status">Especial $450 MXN (pago √∫nico)</span></div>
        </div>
      </div>

      <form id="formInstalacion" class="grid" novalidate>
        <input type="hidden" id="i_colonia" name="colonia" />
        <input type="hidden" id="i_tipo" name="tipo" value="" />

        <div class="col-12">
          <label for="i_coloniaSelect">Colonia</label>
          <select id="i_coloniaSelect" name="coloniaSelect" required>
            <option value="" selected disabled>Selecciona tu colonia‚Ä¶</option>
            <optgroup label="üì∂ Colonias WiFi">
              <option>‚öíÔ∏è El Canton, JAL</option>
              <option>‚öíÔ∏è Fracc. Ex Haciendas San Angel, NAY</option>
              <option>‚öíÔ∏è Fracc. La Joya / Los Mangos, NAY</option>
              <option>‚öíÔ∏è Fracc. La Mision, NAY</option>
              <option>‚öíÔ∏è Fracc. Jardin De Las Arboledas, NAY</option>
              <option>‚öíÔ∏è Fracc. Los Anhelos, NAY</option>
              <option>‚öíÔ∏è Fracc. Palma Real, NAY</option>
              <option>‚öíÔ∏è Fracc. Parque Central, NAY</option>
              <option>‚öíÔ∏è Fracc. Primavera Residencial, NAY</option>
              <option>‚öíÔ∏è Fracc. Valle Dorado, NAY</option>
              <option>‚öíÔ∏è Fracc. Valle Esmeralda, NAY</option>
              <option>‚öíÔ∏è Fracc. Valle Marlin, NAY</option>
              <option>‚öíÔ∏è Fracc. Zafiro Residencial, NAY</option>
            </optgroup>
            <optgroup label="üöÄ Colonias Fibra (Zonas especiales)">
              <option>üöÄ Villas Miramar, NAY</option>
              <option>üöÄ San Vicente del Mar, NAY</option>
            </optgroup>
          </select>
          <div class="status" id="i_coloniaStatus" style="margin-top:6px">Selecciona tu colonia para ver planes</div>
        </div>

        <div class="col-6">
          <label for="i_nombre">Nombre completo</label>
          <input id="i_nombre" name="nombre" placeholder="Tu nombre" required autocomplete="name" />
        </div>

        <div class="col-6">
          <label for="i_telefono">Tel√©fono</label>
          <input id="i_telefono" name="telefono" inputmode="numeric" autocomplete="tel" placeholder="10 d√≠gitos"
                 pattern="[0-9]{10}" title="Debe contener exactamente 10 d√≠gitos (solo n√∫meros 0-9)" required />
        </div>

        <div class="col-12">
          <label for="i_direccion">Direcci√≥n (calle y n√∫mero)</label>
          <input id="i_direccion" name="direccion" placeholder="Ej: Calle Ju√°rez 123" required autocomplete="street-address" />
        </div>

        <div class="col-6">
          <label for="i_correo">Correo</label>
          <input id="i_correo" name="correo" type="email" placeholder="correo@ejemplo.com" required autocomplete="email" />
        </div>

        <div class="col-6">
          <label for="i_metodo">¬øC√≥mo te enteraste?</label>
          <select id="i_metodo" name="metodo" required>
            <option value="" disabled selected>Selecciona una opci√≥n</option>
            <option>Internet</option>
            <option>Volantes</option>
            <option>Recomendaci√≥n</option>
          </select>
        </div>

        <div class="col-6">
          <label for="i_plan">Plan deseado</label>
          <select id="i_plan" name="plan" required disabled>
            <option value="" selected disabled>Selecciona primero tu colonia</option>
          </select>
          <div class="status" id="i_planHint" style="margin-top:6px">Primero elige tu colonia</div>
        </div>

        <div class="col-6">
          <label>Ubicaci√≥n (GPS)</label>
          <div class="inline">
            <button type="button" class="btn" id="i_geoBtn">üìç Obtener ubicaci√≥n</button>
            <span id="i_geoStatus" class="status">Sin ubicaci√≥n</span>
          </div>
          <input type="hidden" id="i_lat" name="lat" />
          <input type="hidden" id="i_lng" name="lng" />
        </div>

        <div class="col-12">
          <button type="submit" class="btn btn-primary" id="i_sendBtn">üì® Enviar informaci√≥n</button>
        </div>
      </form>

      <div class="footer">
        <span>¬© <span class="year"></span> Airconekta</span>
        <span style="opacity:.85">Gracias por elegir un servicio local</span>
      </div>
    </section>

    <!-- CAMBIO -->
    <section class="card" data-view="cambio" id="viewCambio">
      <div class="top-actions">
        <div>
          <h1>Solicitar cambio de domicilio</h1>
          <p class="lead">Al finalizar se abrir√° WhatsApp con tu informaci√≥n lista para enviar.</p>
        </div>
        <button class="btn btn-ghost" type="button" data-back>‚Üê Volver</button>
      </div>

      <form id="formCambio" class="grid" novalidate>
        <div class="col-12">
          <label for="c_nombre">Nombre completo</label>
          <input id="c_nombre" name="nombre" placeholder="Tu nombre" required autocomplete="name" />
        </div>

        <div class="col-6">
          <label for="c_telefono">Tel√©fono de contacto</label>
          <input id="c_telefono" name="telefono" inputmode="numeric" autocomplete="tel" placeholder="10 d√≠gitos"
                 pattern="[0-9]{10}" title="Debe contener exactamente 10 d√≠gitos (solo n√∫meros 0-9)" required />
        </div>

        <div class="col-6">
          <label for="c_fecha">Fecha en la que nos puede recibir</label>
          <input id="c_fecha" name="fecha" type="date" required />
        </div>

        <div class="col-6">
          <label for="c_hora">Hora en la que nos puede recibir</label>
          <input id="c_hora" name="hora" type="time" required />
        </div>

        <div class="col-12">
          <label for="c_domicilioActual">Domicilio actual completo</label>
          <textarea id="c_domicilioActual" name="domicilioActual" rows="3" placeholder="Calle, n√∫mero, colonia, ciudad, CP" required></textarea>
        </div>

        <div class="col-12">
          <label for="c_domicilioNuevo">Nuevo domicilio completo</label>
          <textarea id="c_domicilioNuevo" name="domicilioNuevo" rows="3" placeholder="Calle, n√∫mero, colonia, ciudad, CP" required></textarea>
        </div>

        <div class="col-12">
          <label for="c_comentarios">Comentarios adicionales (opcional)</label>
          <textarea id="c_comentarios" name="comentarios" rows="3" placeholder="Referencias, detalles de acceso, etc. (opcional)"></textarea>
        </div>

        <div class="col-12">
          <button type="submit" class="btn btn-primary">üì® Enviar solicitud por WhatsApp</button>
        </div>
      </form>

      <div class="footer">
        <span>¬© <span class="year"></span> Airconekta</span>
        <span style="opacity:.85">Atenci√≥n local y directa</span>
      </div>
    </section>

    <!-- CANCELACION -->
    <section class="card" data-view="cancelacion" id="viewCancelacion">
      <div class="top-actions">
        <div>
          <h1>Solicitar cancelaci√≥n</h1>
          <p class="lead">Al finalizar se abrir√° WhatsApp con tu informaci√≥n lista para enviar.</p>
        </div>
        <button class="btn btn-ghost" type="button" data-back>‚Üê Volver</button>
      </div>

      <form id="formCancelacion" class="grid" novalidate>
        <div class="col-12">
          <label for="x_nombre">Nombre completo</label>
          <input id="x_nombre" name="nombre" placeholder="Tu nombre" required autocomplete="name" />
        </div>

        <div class="col-6">
          <label for="x_telefono">Tel√©fono de contacto</label>
          <input id="x_telefono" name="telefono" inputmode="numeric" autocomplete="tel" placeholder="10 d√≠gitos"
                 pattern="[0-9]{10}" title="Debe contener exactamente 10 d√≠gitos (solo n√∫meros 0-9)" required />
        </div>

        <div class="col-6">
          <label for="x_fecha">Fecha en la que nos puede recibir</label>
          <input id="x_fecha" name="fecha" type="date" required />
        </div>

        <div class="col-6">
          <label for="x_hora">Hora en la que nos puede recibir</label>
          <input id="x_hora" name="hora" type="time" required />
        </div>

        <div class="col-12">
          <label for="x_domicilio">Domicilio completo del servicio</label>
          <textarea id="x_domicilio" name="domicilio" rows="3" placeholder="Calle, n√∫mero, colonia, ciudad, CP" required></textarea>
        </div>

        <div class="col-12">
          <label for="x_motivo">Motivo de cancelaci√≥n (opcional)</label>
          <textarea id="x_motivo" name="motivo" rows="3" placeholder="Cu√©ntanos brevemente el motivo (opcional)"></textarea>
        </div>

        <div class="col-12">
          <button type="submit" class="btn btn-primary">üì® Enviar solicitud por WhatsApp</button>
        </div>
      </form>

      <div class="footer">
        <span>¬© <span class="year"></span> Airconekta</span>
        <span style="opacity:.85">Gracias por tu tiempo</span>
      </div>
    </section>

    <!-- ===== WHOAMI (vista oculta por hash) ===== -->
    <section class="card" data-view="whoami" id="viewWhoami" aria-label="Whoami">
      <div class="top-actions">
        <div>
          <h1 style="margin:0">Whoami</h1>
          <p class="lead" style="margin:6px 0 0">Vista especial (solo con <b>#whoami</b>).</p>
        </div>
        <button class="btn btn-ghost" type="button" id="whoBackBtn">‚Üê Volver</button>
      </div>

      <div class="who-wrap">
        <div class="who-card">
          <div class="who-hero">
            <div class="who-avatar" aria-hidden="true">JE</div>
            <div>
              <p class="who-name" id="whoName">‚Äî</p>
              <p class="who-role" id="whoRole">‚Äî</p>
            </div>
            <span class="pill">üß© Debug route ¬∑ #whoami</span>
          </div>

          <div class="divider"></div>

          <div class="kpoints">
            <div class="k"><strong>üìû Tel√©fono</strong><span class="status" id="whoPhonePretty">‚Äî</span></div>
            <div class="k"><strong>üü¢ WhatsApp</strong><span class="status">Toca ‚ÄúAbrir chat‚Äù</span></div>
            <div class="k"><strong>üß† Tip</strong><span class="status">En consola tambi√©n aparece tu firma</span></div>
            <div class="k"><strong>üîí Nota</strong><span class="status">Solo aparece con #whoami</span></div>
          </div>

          <div class="who-actions">
            <a class="btn btn-primary" id="whoWhatsBtn" href="#" rel="noopener noreferrer">üü¢ Abrir chat</a>
            <a class="btn" id="whoCallBtn" href="#">üìû Llamar</a>
            <button class="btn" type="button" id="whoCopyBtn">üìã Copiar datos</button>
          </div>

          <div class="divider"></div>

          <div class="mini-note" style="margin-top:0">
            Si llegaste aqu√≠ por accidente: vuelve o borra el hash (<b>#whoami</b>) de la URL.
          </div>
        </div>

        <div class="who-card">
          <h2 style="margin:0 0 8px">üîé ¬øC√≥mo s√© que s√≠ funciona?</h2>
          <div class="mini-note" style="margin-top:0">
            <b>1)</b> Entra a <b>#whoami</b> al final de la URL.<br><br>
            <b>2)</b> Abre DevTools ‚Üí Console y recarga: ver√°s tu firma.<br><br>
            <b>3)</b> ‚ÄúVer c√≥digo fuente‚Äù: tambi√©n ver√°s este bloque de firma.
          </div>
        </div>
      </div>
    </section>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    /* =====================
       CONFIG
    ===================== */
    const NUMERO_DESTINO = "5213222108817";
    const COLONIAS_FIBRA = ["üöÄ Villas Miramar, NAY", "üöÄ San Vicente del Mar, NAY"];

    const WHOAMI = {
      name: "Jair Elizondo",
      phonePretty: "322 243 9782",
      phoneDigits: "3222439782",
      role: "Soporte / Instalaciones ¬∑ Airconekta",
      hint: "#whoami",
      webHint: "Escribe #whoami al final de la URL"
    };

    const LOGO_1024 = "https://raw.githubusercontent.com/airconekta/airconekta/refs/heads/main/airconekta_logo_1024.png";
    const LOGO_512  = "https://raw.githubusercontent.com/airconekta/airconekta/refs/heads/main/airconekta_logo_512.png";
    const LOGO_TRANS= "https://raw.githubusercontent.com/airconekta/airconekta/refs/heads/main/airconekta_logo_transparent.png";

    const $  = (s) => document.querySelector(s);
    const $$ = (s) => Array.from(document.querySelectorAll(s));

    const toast = (msg) => {
      const t = $("#toast");
      t.textContent = msg;
      t.classList.add("show");
      setTimeout(() => t.classList.remove("show"), 1800);
    };

    /* Firma consola */
    (function consoleSignature(){
      try{
        const line = "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ";
        console.log("%c" + line, "color:#18c6ff;font-weight:900");
        console.log("%cAIRCONEKTA ¬∑ Firma de desarrollo","color:#246bff;font-size:14px;font-weight:900");
        console.log("%c" + WHOAMI.name + "  ¬∑  " + WHOAMI.phonePretty + "  ¬∑  " + WHOAMI.hint,"color:#7c3aed;font-size:12px;font-weight:900");
        console.log("%c" + WHOAMI.webHint, "color:#5b6b86;font-size:12px;font-weight:800");
        console.log("%c" + line, "color:#18c6ff;font-weight:900");
      }catch{}
    })();

    /* =====================
       Splash
    ===================== */
    const splash = document.getElementById("splash");
    const hideSplash = () => splash?.classList.add("hide");
    splash?.addEventListener("click", hideSplash, { passive:true });
    window.addEventListener("load", () => setTimeout(hideSplash, 3000));

    /* A√±o */
    $("#year").textContent = (new Date()).getFullYear();
    $$(".year").forEach(el => el.textContent = (new Date()).getFullYear());

    /* =====================
       Theme
    ===================== */
    const THEME_KEY = "airconekta_theme";
    function applyTheme(theme){
      document.documentElement.setAttribute("data-theme", theme);
      localStorage.setItem(THEME_KEY, theme);
      const icon = theme === "dark" ? "üåô" : "‚òÄÔ∏è";
      $("#themeBtn").textContent = icon;
      $("#themeBtn").setAttribute("aria-label", theme === "dark" ? "Cambiar a tema claro" : "Cambiar a tema oscuro");
    }
    const savedTheme = localStorage.getItem(THEME_KEY);
    if (savedTheme) applyTheme(savedTheme);
    else applyTheme(window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");

    $("#themeBtn").addEventListener("click", () => {
      const cur = document.documentElement.getAttribute("data-theme") || "light";
      applyTheme(cur === "dark" ? "light" : "dark");
      toast("Tema actualizado ‚úÖ");
    });

    /* =====================
       Router de vistas (home/instalacion/cambio/cancelacion/whoami)
    ===================== */
    const VIEW_KEY = "airconekta_last_view";

    function showView(name){
      $$("[data-view]").forEach(el => el.classList.remove("active"));
      const el = document.querySelector(`[data-view="${name}"]`);
      if (el) el.classList.add("active");

      if (name !== "whoami"){
        sessionStorage.setItem(VIEW_KEY, name);
      }

      try{ window.scrollTo({ top:0, behavior:"smooth" }); }
      catch{ window.scrollTo(0,0); }
    }

    /* =====================
       #whoami
    ===================== */
    function renderWhoami(){
      $("#whoName").textContent = WHOAMI.name;
      $("#whoRole").textContent = WHOAMI.role;
      $("#whoPhonePretty").textContent = WHOAMI.phonePretty;

      const waLink =
        `https://api.whatsapp.com/send?phone=52${WHOAMI.phoneDigits}` +
        `&text=${encodeURIComponent("Hola üëã " + WHOAMI.name + ", necesito soporte / info de Airconekta.")}` +
        `&type=phone_number&app_absent=0`;

      $("#whoWhatsBtn").setAttribute("href", waLink);
      $("#whoCallBtn").setAttribute("href", `tel:+52${WHOAMI.phoneDigits}`);

      $("#whoCopyBtn").onclick = async () => {
        const text =
          `${WHOAMI.name}\n` +
          `${WHOAMI.phonePretty}\n` +
          `Airconekta\n` +
          `Tip: ${location.origin + location.pathname}#whoami`;
        try{
          await navigator.clipboard.writeText(text);
          toast("Datos copiados ‚úÖ");
        }catch{
          toast("No se pudo copiar (permiso del navegador)");
        }
      };

      $("#whoBackBtn").onclick = () => {
        history.replaceState(null, "", location.pathname + location.search);
        const last = sessionStorage.getItem(VIEW_KEY) || "home";
        showView(last);
      };
    }

    function handleHashRoute(){
      const h = (location.hash || "").toLowerCase().trim();
      if (h === "#whoami"){
        renderWhoami();
        showView("whoami");
        return true;
      }
      return false;
    }

    window.addEventListener("hashchange", () => {
      if (!handleHashRoute()){
        const last = sessionStorage.getItem(VIEW_KEY) || "home";
        showView(last);
      }
    }, { passive:true });

    function clearHashIfAny(){
      if ((location.hash || "").toLowerCase().trim() === "#whoami") return;
      if (location.hash) history.replaceState(null, "", location.pathname + location.search);
    }

    $("#menuBtn").addEventListener("click", () => {
      clearHashIfAny();
      showView("home");
      toast("Opciones listas ‚úÖ");
    });

    $$("[data-go]").forEach(btn => {
      btn.addEventListener("click", () => {
        const target = btn.getAttribute("data-go");
        clearHashIfAny();
        showView(target);
        setTimeout(() => {
          const first = document.querySelector(`[data-view="${target}"] input, [data-view="${target}"] select, [data-view="${target}"] textarea`);
          first?.focus?.();
        }, 60);
      });
    });

    $$("[data-back]").forEach(btn => {
      btn.addEventListener("click", () => {
        clearHashIfAny();
        showView("home");
      });
    });

    $("#shareBtn").addEventListener("click", async (e) => {
      e.preventDefault();
      if (navigator.share){
        try{
          await navigator.share({
            title: "Airconekta ¬∑ Centro de Solicitudes",
            text: "Instalaci√≥n, Cambio de domicilio y Cancelaci√≥n (WhatsApp listo)",
            url: location.href
          });
        }catch{}
      } else {
        try{
          await navigator.clipboard?.writeText(location.href);
          toast("Enlace copiado ‚úÖ");
        }catch{
          toast("Copia el enlace desde la barra del navegador");
        }
      }
    });

    /* =====================
       Instalaci√≥n: colonia -> tipo -> planes (STRICT)
       - colonia requerida
       - planes SOLO despu√©s de colonia
       - plan DISABLED hasta colonia
    ===================== */
    const i_coloniaSelect = $("#i_coloniaSelect");
    const i_coloniaHidden = $("#i_colonia");
    const i_coloniaStatus = $("#i_coloniaStatus");
    const i_tipoHidden    = $("#i_tipo");
    const tipoServicioBox = $("#tipoServicioBox");
    const tipoBadge       = $("#tipoBadge");
    const tipoStatus      = $("#tipoStatus");
    const wifiBox         = $("#wifiBox");
    const fibraBox        = $("#fibraBox");
    const i_plan          = $("#i_plan");
    const i_planHint      = $("#i_planHint");

    function isFibraColonia(v){
      return COLONIAS_FIBRA.includes((v || "").trim());
    }

    function lockPlan(){
      i_plan.disabled = true;
      i_plan.innerHTML = `<option value="" selected disabled>Selecciona primero tu colonia</option>`;
      i_planHint.textContent = "Primero elige tu colonia";
    }

    function setPlanOptions(tipo){
      i_plan.disabled = false;
      i_plan.innerHTML = "";
      const ph = document.createElement("option");
      ph.value = "";
      ph.disabled = true;
      ph.selected = true;
      ph.textContent = "Selecciona un plan";
      i_plan.appendChild(ph);

      if (tipo === "fibra"){
        const o1 = document.createElement("option");
        o1.value = "Fibra 50 Mb ‚Äî $350 MXN";
        o1.textContent = "Fibra 50 Mb ‚Äî $350 MXN";
        const o2 = document.createElement("option");
        o2.value = "Fibra 70 Mb ‚Äî $450 MXN";
        o2.textContent = "Fibra 70 Mb ‚Äî $450 MXN";
        i_plan.appendChild(o1);
        i_plan.appendChild(o2);
        i_planHint.textContent = "Planes de fibra (zona especial)";
      } else {
        const o1 = document.createElement("option");
        o1.value = "Plan 300 ‚Äî 15 Mbps";
        o1.textContent = "Plan 300 ‚Äî 15 Mbps";
        const o2 = document.createElement("option");
        o2.value = "Plan 400 ‚Äî 20 Mbps";
        o2.textContent = "Plan 400 ‚Äî 20 Mbps";
        const o3 = document.createElement("option");
        o3.value = "Plan 600 ‚Äî 25 Mbps";
        o3.textContent = "Plan 600 ‚Äî 25 Mbps";
        i_plan.appendChild(o1);
        i_plan.appendChild(o2);
        i_plan.appendChild(o3);
        i_planHint.textContent = "Planes inal√°mbricos (WiFi)";
      }
    }

    function applyTipoServicio(tipo){
      const isFibra = (tipo === "fibra");
      i_tipoHidden.value = tipo;

      tipoBadge.textContent  = isFibra ? "üöÄ FIBRA √ìPTICA" : "üì∂ WiFi";
      tipoStatus.textContent = isFibra ? "Mostrando planes de fibra (zona especial)" : "Mostrando planes inal√°mbricos";

      wifiBox.style.display  = isFibra ? "none" : "grid";
      fibraBox.style.display = isFibra ? "grid" : "none";

      setPlanOptions(tipo);
    }

    function setInstalacionColonia(val){
      const t = (val || "").trim();
      i_coloniaHidden.value = t;

      if (!t){
        i_coloniaStatus.textContent = "Selecciona tu colonia para ver planes";
        tipoServicioBox.style.display = "none";
        i_tipoHidden.value = "";
        lockPlan();
        return;
      }

      i_coloniaStatus.textContent = `Colonia: ${t}`;
      tipoServicioBox.style.display = "block";

      const tipo = isFibraColonia(t) ? "fibra" : "wifi";
      applyTipoServicio(tipo);
    }

    i_coloniaSelect.addEventListener("change", () => setInstalacionColonia(i_coloniaSelect.value));

    // Estado inicial: sin colonia -> plan bloqueado, sin tipo
    setInstalacionColonia("");

    function digits10FromInput(selector){
      const el = $(selector);
      const n = (el.value || "").replace(/\D+/g, "");
      if (n && n !== el.value) el.value = n;
      return (n.length === 10) ? n : null;
    }

    function abrirWhatsApp(text){
      const url =
        `https://api.whatsapp.com/send?phone=${NUMERO_DESTINO}` +
        `&text=${encodeURIComponent(text)}` +
        `&type=phone_number&app_absent=0`;
      window.open(url, "_blank", "noopener,noreferrer");
      toast("Abriendo WhatsApp‚Ä¶");
    }

    $("#i_geoBtn").addEventListener("click", () => {
      const st = $("#i_geoStatus");
      if (!("geolocation" in navigator)){
        st.textContent = "Geolocalizaci√≥n no soportada";
        toast("Tu navegador no soporta ubicaci√≥n");
        return;
      }
      st.textContent = "Obteniendo ubicaci√≥n‚Ä¶";
      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const { latitude, longitude } = pos.coords;
          $("#i_lat").value = latitude.toFixed(6);
          $("#i_lng").value = longitude.toFixed(6);
          st.textContent = `Lat ${$("#i_lat").value}, Lng ${$("#i_lng").value}`;
          toast("Ubicaci√≥n lista ‚úÖ");
        },
        (err) => {
          console.warn(err);
          st.textContent = "No se pudo obtener ubicaci√≥n";
          toast("No se pudo obtener ubicaci√≥n");
        },
        { enableHighAccuracy:true, timeout:12000, maximumAge:0 }
      );
    });

    $("#formInstalacion").addEventListener("submit", (e) => {
      e.preventDefault();
      const form = $("#formInstalacion");
      if (!form.checkValidity()){
        form.reportValidity();
        return;
      }

      if (!i_coloniaHidden.value){
        toast("Selecciona tu colonia");
        i_coloniaSelect.focus();
        return;
      }

      if (i_plan.disabled || !i_plan.value){
        toast("Selecciona un plan");
        i_plan.focus();
        return;
      }

      const tel = digits10FromInput("#i_telefono");
      if (!tel){
        toast("El tel√©fono debe tener 10 d√≠gitos");
        $("#i_telefono").focus();
        return;
      }

      const nombre    = $("#i_nombre").value.trim();
      const direccion = $("#i_direccion").value.trim();
      const plan      = $("#i_plan").value;
      const correo    = $("#i_correo").value.trim();
      const metodo    = $("#i_metodo").value;
      const colonia   = i_coloniaHidden.value.trim();
      const lat       = $("#i_lat").value;
      const lng       = $("#i_lng").value;
      const tipo      = (i_tipoHidden.value || "").trim();

      let msg = "Hola üëã\nMe gustar√≠a hablar sobre la contrataci√≥n de servicio.\n\n";
      msg += "*Tipo de solicitud:* Instalaci√≥n\n";
      msg += `*Colonia:* ${colonia}\n`;
      msg += `*Tipo de servicio:* ${tipo === "fibra" ? "FIBRA √ìPTICA" : "WiFi"}\n`;
      msg += `*Nombre:* ${nombre}\n`;
      msg += `*Direcci√≥n:* ${direccion}, ${colonia}\n`;
      msg += `*Plan deseado:* ${plan}\n`;
      msg += `*Tel√©fono:* ${tel}\n`;
      msg += `*Correo:* ${correo}\n`;
      msg += `*M√©todo de contacto:* ${metodo}\n`;
      msg += (tipo === "fibra") ? "*Instalaci√≥n:* $450 MXN (especial)\n" : "*Instalaci√≥n:* $999 MXN (pago √∫nico)\n";
      if (lat && lng) msg += `*Ubicaci√≥n:* https://www.google.com/maps?q=${lat},${lng}\n`;

      abrirWhatsApp(msg);
    });

    $("#formCambio").addEventListener("submit", (e) => {
      e.preventDefault();
      const form = $("#formCambio");
      if (!form.checkValidity()){
        form.reportValidity();
        return;
      }

      const tel = digits10FromInput("#c_telefono");
      if (!tel){
        toast("El tel√©fono debe tener 10 d√≠gitos");
        $("#c_telefono").focus();
        return;
      }

      const nombre = $("#c_nombre").value.trim();
      const fecha  = $("#c_fecha").value;
      const hora   = $("#c_hora").value;
      const domA   = $("#c_domicilioActual").value.trim();
      const domN   = $("#c_domicilioNuevo").value.trim();
      const comm   = $("#c_comentarios").value.trim();

      let msg = "Hola üëã\nMe gustar√≠a solicitar un *cambio de domicilio* de mi servicio.\n\n";
      msg += "*Tipo de solicitud:* Cambio de domicilio\n";
      msg += `*Nombre:* ${nombre}\n`;
      msg += `*Tel√©fono de contacto:* ${tel}\n`;
      msg += `*Domicilio actual:*\n${domA}\n`;
      msg += `*Nuevo domicilio:*\n${domN}\n`;
      msg += `*Fecha en la que me pueden recibir:* ${fecha || "No especificada"}\n`;
      msg += `*Hora en la que me pueden recibir:* ${hora || "No especificada"}\n`;
      if (comm) msg += `*Comentarios adicionales:*\n${comm}\n`;

      abrirWhatsApp(msg);
    });

    $("#formCancelacion").addEventListener("submit", (e) => {
      e.preventDefault();
      const form = $("#formCancelacion");
      if (!form.checkValidity()){
        form.reportValidity();
        return;
      }

      const tel = digits10FromInput("#x_telefono");
      if (!tel){
        toast("El tel√©fono debe tener 10 d√≠gitos");
        $("#x_telefono").focus();
        return;
      }

      const nombre = $("#x_nombre").value.trim();
      const fecha  = $("#x_fecha").value;
      const hora   = $("#x_hora").value;
      const dom    = $("#x_domicilio").value.trim();
      const motivo = $("#x_motivo").value.trim();

      let msg = "Hola üëã\nMe gustar√≠a solicitar la *cancelaci√≥n* de mi servicio.\n\n";
      msg += "*Tipo de solicitud:* Cancelaci√≥n\n";
      msg += `*Nombre:* ${nombre}\n`;
      msg += `*Tel√©fono de contacto:* ${tel}\n`;
      msg += `*Domicilio completo del servicio:*\n${dom}\n`;
      msg += `*Fecha en la que me pueden recibir:* ${fecha || "No especificada"}\n`;
      msg += `*Hora en la que me pueden recibir:* ${hora || "No especificada"}\n`;
      if (motivo) msg += `*Motivo de cancelaci√≥n:*\n${motivo}\n`;

      abrirWhatsApp(msg);
    });

    /* =====================
       PWA: manifest + SW (en memoria)
    ===================== */
    const manifest = {
      name: "Airconekta Centro de Solicitudes",
      short_name: "Airconekta",
      description: "Instalaci√≥n, Cambio de domicilio y Cancelaci√≥n. Env√≠o por WhatsApp.",
      start_url: "./",
      scope: "./",
      display: "standalone",
      background_color: "#0b1220",
      theme_color: "#0b1220",
      icons: [
        { src: LOGO_512, sizes: "512x512", type: "image/png" },
        { src: LOGO_1024, sizes: "1024x1024", type: "image/png" }
      ]
    };

    const manBlob = new Blob([JSON.stringify(manifest)], { type: "application/json" });
    const manURL  = URL.createObjectURL(manBlob);
    const link    = document.createElement("link");
    link.rel = "manifest";
    link.href = manURL;
    document.head.appendChild(link);

    if ("serviceWorker" in navigator){
      const swCode = `
        const CACHE = 'airconekta-centro-v4';
        const CORE = ['./'];
        self.addEventListener('install', (e) => {
          e.waitUntil(caches.open(CACHE).then((c) => c.addAll(CORE)));
          self.skipWaiting();
        });
        self.addEventListener('activate', (e) => {
          e.waitUntil(self.clients.claim());
        });
        self.addEventListener('fetch', (e) => {
          const req = e.request;
          if (req.method !== 'GET') return;
          e.respondWith(
            caches.match(req).then((r) => r || fetch(req).then((res) => {
              const copy = res.clone();
              caches.open(CACHE).then((c) => c.put(req, copy)).catch(() => {});
              return res;
            }).catch(() => caches.match('./')))
          );
        });
      `;
      const swBlob = new Blob([swCode], { type:"text/javascript" });
      const swURL  = URL.createObjectURL(swBlob);
      navigator.serviceWorker.register(swURL).catch(() => {});
    }

    let deferredPrompt;
    window.addEventListener("beforeinstallprompt", (e) => {
      e.preventDefault();
      deferredPrompt = e;
      const btn = document.getElementById("installBtn");
      btn.style.display = "inline-flex";
      btn.onclick = async () => {
        btn.disabled = true;
        try{
          await deferredPrompt.prompt();
          await deferredPrompt.userChoice;
        }finally{
          deferredPrompt = null;
          btn.style.display = "none";
        }
      };
    });

    /* =====================
       INICIO: si entra con #whoami, manda ah√≠.
    ===================== */
    if (!sessionStorage.getItem(VIEW_KEY)) sessionStorage.setItem(VIEW_KEY, "home");
    const routed = handleHashRoute();
    if (!routed){
      showView(sessionStorage.getItem(VIEW_KEY) || "home");
    }
  </script>
</body>
</html>
